"use strict";(self.webpackChunkchakra_ui_time_picker=self.webpackChunkchakra_ui_time_picker||[]).push([[342],{"./stories/Basics.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Disabled:()=>Disabled,Steps:()=>Steps,TimeFormat:()=>TimeFormat,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Basics_stories});var react=__webpack_require__("./node_modules/react/index.js"),format=__webpack_require__("./node_modules/date-fns/esm/format/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");styled_components_browser_esm.ZP.div`
  /* System font stack */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
`;function generateOptions(length,excludedOptions){const arr=[];for(let value=0;value<length;value+=1)excludedOptions.indexOf(value)<0&&arr.push(value);return arr}function onChange(value,saveValueFormat){try{const formattedTime=(0,format.Z)(value,saveValueFormat);console.log(formattedTime)}catch(error){throw new Error("Invalid format value, kindly enter valid value")}}function disabledMinutes(h){if(!h)return[];switch(h){case 9:return generateOptions(60,[30]);case 21:return generateOptions(60,[0]);default:return generateOptions(60,[])}}var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),raf=__webpack_require__("./node_modules/raf/index.js"),raf_default=__webpack_require__.n(raf),getHours=__webpack_require__("./node_modules/date-fns/esm/getHours/index.js"),getMinutes=__webpack_require__("./node_modules/date-fns/esm/getMinutes/index.js"),getSeconds=__webpack_require__("./node_modules/date-fns/esm/getSeconds/index.js"),parse=__webpack_require__("./node_modules/date-fns/esm/parse/index.js");function noop(){}function scrollTo(element,to,duration){if(duration<=0)return void raf_default()((()=>{element.scrollTop=to}));const perTick=(to-element.scrollTop)/duration*10;raf_default()((()=>{element.scrollTop+=perTick,element.scrollTop!==to&&scrollTo(element,to,duration-10)}))}function formatOption(option,disabledOptions){let value=`${option}`,disabled=!1;return option<10&&(value=`0${option}`),disabledOptions.indexOf(option)>=0&&(disabled=!0),{value,disabled}}function helpers_generateOptions(length,disabledOptions,hideDisabledOptions){let step=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const arr=[];for(let value=0;value<length;value+=step)(disabledOptions.indexOf(value)<0||!hideDisabledOptions)&&arr.push(value);return arr}var focus_trap_react=__webpack_require__("./node_modules/focus-trap-react/dist/focus-trap-react.js"),focus_trap_react_default=__webpack_require__.n(focus_trap_react),set=__webpack_require__("./node_modules/date-fns/esm/set/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Column=styled_components_browser_esm.ZP.div`
  flex: 1;

  /*
   * position relative needed to make offsetTop work
   * used in scrolling to selected option
   */
  position: relative;
  overflow-y: auto;
  max-height: 12em;
  border: 1px solid #e9e9e9;

  scrollbar-width: 8px;

  &:first-child {
    border-left: 0;
  }

  &:last-child {
    border-right: 0;
  }

  ul {
    list-style: none;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    width: 100%;
  }

  li {
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 24px;
    line-height: 24px;
    text-align: center;
    cursor: pointer;
    user-select: none;

    &:hover {
      background: #edfaff;
    }

    &.${_ref=>{let{className}=_ref;return className+"-option-selected"}} {
      background: #f7f7f7;
      font-weight: bold;
    }

    &.${_ref2=>{let{className}=_ref2;return className+"-option-disabled"}} {
      color: #ccc;
      &:hover {
        background: transparent;
        cursor: not-allowed;
      }
    }
  }
`;class Select extends react.Component{constructor(props){super(props),this.selectRef=react.createRef(),this.listRef=react.createRef(),this.onSelect=this.onSelect.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidMount(){this.scrollToSelected(0)}componentDidUpdate(prevProps){const{selectedIndex,focused}=this.props;prevProps.selectedIndex!==selectedIndex&&this.scrollToSelected(120),prevProps.focused!==focused&&focused&&this.changeFocusBy(0)}onSelect(value){const{onSelect,type}=this.props;onSelect(type,value)}getOptionLabel(value){const number=parseInt(value,10);return isNaN(number)?value.toUpperCase():number.toString()}getOptions(){const{options,selectedIndex,prefixCls}=this.props;return options?.map(((item,index)=>{const selected=selectedIndex===index,cls=classnames_default()({[`${prefixCls}-select-option-selected`]:selected,[`${prefixCls}-select-option-disabled`]:item.disabled}),onClick=item.disabled?noop:()=>{this.onSelect(item.value)};return(0,jsx_runtime.jsx)("li",{role:"radio",onClick,className:cls,tabIndex:0,onKeyDown:e=>{13!==e.keyCode&&32!==e.keyCode||(onClick(),e.preventDefault(),e.stopPropagation())},"aria-checked":selected,"aria-label":this.getOptionLabel(item.value),children:item.value},index)}))}handleKeyDown(e){40===e.keyCode?(this.changeFocusBy(1),e.preventDefault(),e.stopPropagation()):38===e.keyCode&&(this.changeFocusBy(-1),e.preventDefault(),e.stopPropagation()),this.props.onKeyDown(e)}changeFocusBy(offset){const{options,selectedIndex}=this.props;let index=selectedIndex+offset;index<0?index=options.length-1:index>=options.length&&(index=0);const selectedOption=options[index];if(selectedOption.disabled)return;this.onSelect(selectedOption.value);const list=this.listRef.current;if(!list)return;list.children[index].focus()}scrollToSelected(duration){const{selectedIndex}=this.props,list=this.listRef.current;if(!list)return;let index=selectedIndex;index<0&&(index=0);const to=list.children[index].offsetTop;this.selectRef.current&&scrollTo(this.selectRef.current,to,duration)}render(){const{prefixCls,options,label}=this.props;return 0===options.length?null:(0,jsx_runtime.jsx)(Column,{className:`${prefixCls}-select`,onKeyDown:this.handleKeyDown,ref:this.selectRef,children:(0,jsx_runtime.jsx)("ul",{role:"radiogroup","aria-label":`Select ${label}`,ref:this.listRef,children:this.getOptions()})})}}Select.displayName="Select";const src_Select=Select,Columns=styled_components_browser_esm.ZP.div`
  position: absolute;
  z-index: 100;
  width: 100%;

  display: flex;
  flex-direction: row;
  background-color: white;
  border-radius: 4px;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  margin-left: -1px;
`;class Combobox extends react.Component{constructor(props){super(props),this.state={selectFocusOn:null},this.onItemChange=this.onItemChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getColumns=this.getColumns.bind(this)}onItemChange(type,itemValue){const{onChange,defaultOpenValue,use12Hours,isAM,onAmPmChange}=this.props,value=this.props.value||defaultOpenValue;let hour=(0,getHours.Z)(value),minute=(0,getMinutes.Z)(value),second=(0,getSeconds.Z)(value);if("hour"===type)hour=use12Hours?isAM?+itemValue%12:+itemValue%12+12:+itemValue;else if("minute"===type)minute=+itemValue;else if("ampm"===type){const ampm=itemValue.toUpperCase();use12Hours&&("PM"===ampm&&hour<12&&(hour=hour%12+12),"AM"===ampm&&hour>=12&&(hour-=12)),onAmPmChange(ampm)}else second=+itemValue;onChange((0,set.Z)(value,{hours:hour,minutes:minute,seconds:second}),this.props.saveValueFormat)}getHourSelect(hour){const{prefixCls,hourOptions,disabledHours,showHour,use12Hours}=this.props;if(!showHour)return null;const disabledOptions=disabledHours();let hourOptionsAdj,hourAdj;return use12Hours?(hourOptionsAdj=[12].concat(hourOptions.filter((h=>h<12&&h>0))),hourAdj=hour%12||12):(hourOptionsAdj=hourOptions,hourAdj=hour),(0,jsx_runtime.jsx)(src_Select,{prefixCls,options:hourOptionsAdj?.map((option=>formatOption(option,disabledOptions))),selectedIndex:hourOptionsAdj.indexOf(hourAdj),type:"hour",label:"hour",onSelect:this.onItemChange,onKeyDown:e=>this.handleKeyDown("hour",e),focused:"hour"===this.state.selectFocusOn})}getMinuteSelect(minute){const{prefixCls,minuteOptions,disabledMinutes,defaultOpenValue,showMinute,value:propValue}=this.props;if(!showMinute)return null;const value=propValue||defaultOpenValue,disabledOptions=disabledMinutes((0,getHours.Z)(value));return(0,jsx_runtime.jsx)(src_Select,{prefixCls,options:minuteOptions?.map((option=>formatOption(option,disabledOptions))),selectedIndex:minuteOptions.indexOf(minute),type:"minute",label:"minute",onSelect:this.onItemChange,onKeyDown:e=>this.handleKeyDown("minute",e),focused:"minute"===this.state.selectFocusOn})}getSecondSelect(second){const{prefixCls,secondOptions,disabledSeconds,showSecond,defaultOpenValue,value:propValue}=this.props;if(!showSecond)return null;const value=propValue||defaultOpenValue,disabledOptions=disabledSeconds((0,getHours.Z)(value),(0,getMinutes.Z)(value));return(0,jsx_runtime.jsx)(src_Select,{prefixCls,options:secondOptions?.map((option=>formatOption(option,disabledOptions))),selectedIndex:secondOptions.indexOf(second),type:"second",label:"second",onSelect:this.onItemChange,onKeyDown:e=>this.handleKeyDown("second",e),focused:"second"===this.state.selectFocusOn})}getAMPMSelect(){const{prefixCls,use12Hours,format,isAM}=this.props;if(!use12Hours)return null;const AMPMOptions=["am","pm"]?.map((c=>format.match(/\sA/)?c.toUpperCase():c))?.map((c=>({value:c,disabled:!1}))),selected=isAM?0:1;return(0,jsx_runtime.jsx)(src_Select,{prefixCls,options:AMPMOptions,selectedIndex:selected,type:"ampm",label:"AM or PM",onSelect:this.onItemChange,onKeyDown:e=>this.handleKeyDown("ampm",e),focused:"ampm"===this.state.selectFocusOn})}handleKeyDown(currentType,e){39===e.keyCode?(this.changeFocusTo(currentType,1),e.preventDefault(),e.stopPropagation()):37===e.keyCode&&(this.changeFocusTo(currentType,-1),e.preventDefault(),e.stopPropagation())}getColumns(){const{showHour,showMinute,showSecond,use12Hours}=this.props;return[["hour",showHour],["minute",showMinute],["second",showSecond],["ampm",use12Hours]].filter((_ref=>{let[,enabled]=_ref;return enabled}))?.map((_ref2=>{let[val]=_ref2;return val}))}changeFocusTo(currentSelectType,offset){const columns=this.getColumns();let newIndex=columns.indexOf(currentSelectType)+offset;newIndex<0?newIndex=columns.length-1:newIndex>=columns.length&&(newIndex=0);const newFocusOn=columns[newIndex];this.setState({selectFocusOn:newFocusOn})}render(){const{prefixCls,defaultOpenValue,value:propValue}=this.props,value=propValue||defaultOpenValue;return(0,jsx_runtime.jsxs)(Columns,{className:`${prefixCls}-combobox`,children:[this.getHourSelect((0,getHours.Z)(value)),this.getMinuteSelect((0,getMinutes.Z)(value)),this.getSecondSelect((0,getSeconds.Z)(value)),this.getAMPMSelect()]})}}Combobox.displayName="Combobox";const src_Combobox=Combobox;class Panel extends react.Component{static defaultProps={onChange:noop,disabledHours:noop,disabledMinutes:noop,disabledSeconds:noop,defaultOpenValue:new Date,use12Hours:!1,onAmPmChange:noop};constructor(props){super(props),this.state={value:props.value},this.onChange=this.onChange.bind(this),this.onAmPmChange=this.onAmPmChange.bind(this),this.disabledHours=this.disabledHours.bind(this)}UNSAFE_componentWillReceiveProps(nextProps){const value=nextProps.value;value&&this.setState({value})}onChange(newValue,saveValueFormat){const{onChange}=this.props;this.setState({value:newValue}),onChange(newValue,saveValueFormat)}onAmPmChange(ampm){const{onAmPmChange}=this.props;onAmPmChange(ampm)}disabledHours(){const{use12Hours,disabledHours}=this.props;let disabledOptions=disabledHours();return use12Hours&&Array.isArray(disabledOptions)&&(disabledOptions=this.isAM()?disabledOptions.filter((h=>h<12))?.map((h=>0===h?12:h)):disabledOptions?.map((h=>12===h?12:h-12))),disabledOptions}isAM(){const realValue=this.state.value||this.props.defaultOpenValue,hours=(0,getHours.Z)(realValue);return hours>=0&&hours<12}render(){const{prefixCls,disabledMinutes,disabledSeconds,hideDisabledOptions,showHour,showMinute,showSecond,format,defaultOpenValue,closePanel,use12Hours,hourStep,minuteStep,secondStep}=this.props,{value}=this.state,disabledHourOptions=this.disabledHours(),disabledMinuteOptions=disabledMinutes(value?(0,getHours.Z)(value):null),disabledSecondOptions=disabledSeconds(value?(0,getHours.Z)(value):null,value?(0,getMinutes.Z)(value):null),hourOptions=helpers_generateOptions(24,disabledHourOptions,hideDisabledOptions,hourStep),minuteOptions=helpers_generateOptions(60,disabledMinuteOptions,hideDisabledOptions,minuteStep),secondOptions=helpers_generateOptions(60,disabledSecondOptions,hideDisabledOptions,secondStep),validDefaultOpenValue=function toNearestValidTime(time,hourOptions,minuteOptions,secondOptions){const hour=hourOptions.slice().sort(((a,b)=>Math.abs((0,getHours.Z)(time)-a)-Math.abs((0,getHours.Z)(time)-b)))[0],minute=minuteOptions.slice().sort(((a,b)=>Math.abs((0,getMinutes.Z)(time)-a)-Math.abs((0,getMinutes.Z)(time)-b)))[0],second=secondOptions.slice().sort(((a,b)=>Math.abs((0,getSeconds.Z)(time)-a)-Math.abs((0,getSeconds.Z)(time)-b)))[0];return(0,parse.Z)(`${hour}:${minute}:${second}`,"HH:mm:ss",new Date)}(defaultOpenValue,hourOptions,minuteOptions,secondOptions);return(0,jsx_runtime.jsx)(focus_trap_react_default(),{focusTrapOptions:{initialFocus:`.${prefixCls}-select-option-selected`,onDeactivate:()=>closePanel(),clickOutsideDeactivates:!0,escapeDeactivates:!0},children:(0,jsx_runtime.jsx)("div",{className:`${prefixCls}-inner`,children:(0,jsx_runtime.jsx)(src_Combobox,{prefixCls,value,defaultOpenValue:validDefaultOpenValue,format,onChange:this.onChange,onAmPmChange:this.onAmPmChange,showHour,showMinute,showSecond,hourOptions,minuteOptions,secondOptions,disabledHours:this.disabledHours,disabledMinutes,disabledSeconds,use12Hours,isAM:this.isAM(),saveValueFormat:this.props.saveValueFormat})})})}}Panel.displayName="Panel";const src_Panel=Panel;var chunk_LIR5QAZY=__webpack_require__("./node_modules/@chakra-ui/theme-utils/dist/chunk-LIR5QAZY.mjs"),chunk_MFVQSVQB=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-MFVQSVQB.mjs"),chunk_6CVSDS6C=__webpack_require__("./node_modules/@chakra-ui/input/dist/chunk-6CVSDS6C.mjs");const TimePicker_Wrapper=styled_components_browser_esm.ZP.div`
  position: relative;
  display: inline-block;
`,theme=(0,chunk_LIR5QAZY.B1)({colors:{brand:{900:"#1a365d",800:"#153e75",700:"#2a69ac"}}}),defaultProps={id:"",disabled:!1,prefixCls:"react-samay",defaultOpen:!1,className:"",inputClassName:"",placeholder:"",defaultOpenValue:new Date,use12Hours:!1,showHour:!0,showMinute:!0,showSecond:!1,isInvalid:!1,disabledHours:()=>[],disabledMinutes:()=>[],disabledSeconds:()=>[],hideDisabledOptions:!1,onChange:noop,onAmPmChange:noop,onOpen:noop,onClose:noop,onFocus:noop,onBlur:noop};class Picker extends react.Component{static defaultProps=defaultProps;constructor(props){super(props),this.saveInputRef=react.createRef(),this.savePanelRef=react.createRef();const{defaultOpen,defaultValue,open=defaultOpen,value=defaultValue,saveValueFormat="HH:mm"}=props;this.state={open,value,saveValueFormat},this.onPanelChange=this.onPanelChange.bind(this),this.onAmPmChange=this.onAmPmChange.bind(this),this.onVisibleChange=this.onVisibleChange.bind(this),this.closePanel=this.closePanel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}UNSAFE_componentWillReceiveProps(nextProps){const{value,open}=nextProps;"value"in nextProps&&this.setState({value}),void 0!==open&&this.setState({open})}onPanelChange(value,saveValueFormat){this.setValue(value,saveValueFormat)}onAmPmChange(ampm){const{onAmPmChange}=this.props;onAmPmChange(ampm)}onVisibleChange(open){this.setOpen(open)}closePanel(){this.setOpen(!1),this.focus()}onKeyDown(e){[8,13,32,40].indexOf(e.keyCode)>=0&&this.setOpen(!0)}onClick(){this.setOpen(!0)}setValue(value,saveValueFormat){const{onChange}=this.props;"value"in this.props||this.setState({value}),onChange(value,saveValueFormat)}getFormat(){let includeAMPM=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{format,showHour,showMinute,showSecond,use12Hours}=this.props;if(format)return format;if(use12Hours){const fmtString=[showHour?"h":"",showMinute?"mm":"",showSecond?"ss":""].filter((item=>!!item)).join(":");return includeAMPM?fmtString.concat(" a"):fmtString}return[showHour?"HH":"",showMinute?"mm":"",showSecond?"ss":""].filter((item=>!!item)).join(":")}setOpen(open){const{onOpen,onClose}=this.props,{open:currentOpen}=this.state;currentOpen!==open&&("open"in this.props||this.setState({open}),open?onOpen({open}):onClose({open}))}focus(){const el=this.saveInputRef.current;el&&el.focus()}render(){const{id,name,disabled,placeholder,style,prefixCls,className,inputClassName,disabledHours,disabledMinutes,disabledSeconds,hideDisabledOptions,showHour,showMinute,showSecond,defaultOpenValue,use12Hours,onFocus,onBlur,hourStep,minuteStep,secondStep,isInvalid}=this.props,{open,value}=this.state,strValue=value&&(0,format.Z)(value,this.getFormat(use12Hours))||"";return(0,jsx_runtime.jsx)(chunk_MFVQSVQB.f6,{theme,children:(0,jsx_runtime.jsxs)(TimePicker_Wrapper,{id,style,className:classnames_default()(`${prefixCls}-wrapper`,className),children:[(0,jsx_runtime.jsx)(chunk_6CVSDS6C.I,{type:"text",name,className:classnames_default()(`${prefixCls}-input`,inputClassName),ref:this.saveInputRef,placeholder,disabled,value:strValue,onChange:noop,onFocus,onBlur,onClick:this.onClick,onKeyDown:this.onKeyDown,isInvalid}),open&&(0,jsx_runtime.jsx)(src_Panel,{prefixCls:`${prefixCls}-panel`,ref:this.savePanelRef,value:this.state.value,defaultOpenValue,showHour,showMinute,showSecond,closePanel:this.closePanel,format:this.getFormat(),disabledHours,disabledMinutes,disabledSeconds,hideDisabledOptions,use12Hours,hourStep,minuteStep,secondStep,onChange:this.onPanelChange,saveValueFormat:this.state.saveValueFormat,onAmPmChange:this.onAmPmChange})]})})}}Picker.displayName="Picker";const Basics_stories={component:Picker,decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{margin:"2em"},children:(0,jsx_runtime.jsx)(Story,{})})]},Default={render:()=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Picker,{placeholder:"please select",onChange})})},Disabled={render:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h5",{children:"disabled=true"}),(0,jsx_runtime.jsx)(Picker,{disabled:!0,defaultValue:new Date,onChange}),(0,jsx_runtime.jsx)("h5",{children:"disabledHours=[1,2,3,4]"}),(0,jsx_runtime.jsx)(Picker,{defaultValue:new Date,disabledHours:()=>function disabledHours(arr){return[...arr]}([1,2,3,4]),onChange}),(0,jsx_runtime.jsx)("h5",{children:"disabledMinutes"}),(0,jsx_runtime.jsx)(Picker,{defaultValue:new Date,disabledMinutes,onChange})]})},Steps={render:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h5",{children:"minuteStep=10"}),(0,jsx_runtime.jsx)(Picker,{defaultValue:new Date,minuteStep:10}),(0,jsx_runtime.jsx)("h5",{children:"hourStep=2"}),(0,jsx_runtime.jsx)(Picker,{defaultValue:new Date,hourStep:2})]})},TimeFormat={render:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h5",{children:"saveValueFormat=HH:mm"}),(0,jsx_runtime.jsx)(Picker,{saveValueFormat:"HH:mm",defaultValue:new Date,onChange})]})},__namedExportsOrder=["Default","Disabled","Steps","TimeFormat"]}}]);
//# sourceMappingURL=Basics-stories.c42cbded.iframe.bundle.js.map